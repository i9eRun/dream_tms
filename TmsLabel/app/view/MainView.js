/*
 * File: app/view/MainView.js
 *
 * This file was generated by Sencha Architect version 4.3.7.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 7.9.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 7.9.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('TmsLabel.view.MainView', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.mainview',

    requires: [
        'TmsLabel.view.MainViewViewModel',
        'TmsLabel.view.MainViewViewController',
        'Ext.tab.Panel',
        'Ext.tab.Tab',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Date',
        'Ext.form.field.Checkbox',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.form.field.Number',
        'Ext.grid.plugin.CellEditing',
        'Ext.form.Panel',
        'Ext.toolbar.Toolbar',
        'Ext.form.Label'
    ],

    controller: 'mainview',
    viewModel: {
        type: 'mainview'
    },
    layout: 'fit',
    defaultListenerScope: true,

    items: [
        {
            xtype: 'tabpanel',
            reference: 'main_tab',
            activeTab: 0,
            items: [
                {
                    xtype: 'panel',
                    bodyPadding: '10 30 0 30',
                    title: '출고증 관리',
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'container',
                            flex: 1.2,
                            reference: 'con_header',
                            layout: {
                                type: 'vbox',
                                align: 'stretch'
                            },
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    reference: 'row_top',
                                    defaults: {
                                        margin: '0 20 0 0'
                                    },
                                    layout: {
                                        type: 'hbox',
                                        align: 'middle'
                                    },
                                    items: [
                                        {
                                            xtype: 'combobox',
                                            reference: 'chulgo_gb',
                                            width: 150,
                                            fieldLabel: '출고구분',
                                            labelWidth: 60,
                                            value: '',
                                            editable: false,
                                            store: [
                                                [
                                                    '',
                                                    '전체'
                                                ],
                                                [
                                                    '01',
                                                    '시내'
                                                ],
                                                [
                                                    '02',
                                                    '지방'
                                                ]
                                            ]
                                        },
                                        {
                                            xtype: 'datefield',
                                            reference: 'choose_date',
                                            width: 160,
                                            fieldLabel: '일자',
                                            labelWidth: 40,
                                            format: 'Ymd',
                                            submitFormat: 'Ymd',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onDatefieldAfterRender_choose_date',
                                                    scope: 'controller'
                                                },
                                                change: {
                                                    fn: 'onDatefieldChange_choose_date',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'search_button',
                                            width: 80,
                                            text: '조회',
                                            listeners: {
                                                click: {
                                                    fn: 'onButtonClick_search_button',
                                                    scope: 'controller'
                                                },
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_search_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'combobox',
                                            reference: 'combo_agency',
                                            fieldLabel: '대행사',
                                            labelWidth: 50,
                                            editable: false,
                                            displayField: 'custNm',
                                            valueField: 'custCd',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onComboboxAfterRender_combo_agency',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'agency_search_button',
                                            width: 100,
                                            text: '대행사조회',
                                            listeners: {
                                                click: {
                                                    fn: 'onButtonClick_agency_search_button',
                                                    scope: 'controller'
                                                },
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_agency_search_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'combobox',
                                            reference: 'combo_chulpan',
                                            fieldLabel: '출판사',
                                            labelWidth: 50,
                                            editable: false,
                                            displayField: 'custNm',
                                            valueField: 'custCd',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onComboboxAfterRender_combo_chulpan',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'chulpan_button',
                                            width: 100,
                                            text: '출판사조회',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_chulpan_search_button2',
                                                    scope: 'controller'
                                                },
                                                click: {
                                                    fn: 'onButtonClick_chulpan_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'insert_button',
                                            width: 100,
                                            text: '수록',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_insert_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'reset_button',
                                            width: 100,
                                            text: '초기화',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_reset_button',
                                                    scope: 'controller'
                                                },
                                                click: {
                                                    fn: 'onButtonClick_reset_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'save_button',
                                            width: 100,
                                            text: '저장',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_save_button',
                                                    scope: 'controller'
                                                },
                                                click: {
                                                    fn: 'onButtonClick_save_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        }
                                    ]
                                },
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    reference: 'row_bottom',
                                    layout: {
                                        type: 'hbox',
                                        align: 'middle'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            reference: 'chulpan_code',
                                            width: 180,
                                            fieldLabel: '출판사',
                                            labelWidth: 50,
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onTextfieldAfterRender_chulpan_code',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'textfield',
                                            reference: 'chulpan_name',
                                            fieldLabel: '',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onTextfieldAfterRender_chulpan_name',
                                                    scope: 'controller'
                                                },
                                                specialkey: {
                                                    fn: 'onTextfieldSpecialkey_chulpan_name',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'chulpan_search_button',
                                            margin: '0 0 0 10',
                                            width: 80,
                                            text: '찾기',
                                            listeners: {
                                                afterrender: {
                                                    fn: 'onButtonAfterRender_chulpan_search_button',
                                                    scope: 'controller'
                                                },
                                                click: {
                                                    fn: 'onButtonClick_chulpan_search_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'checkboxfield',
                                            margins: '',
                                            reference: 'chk_select_print',
                                            margin: '0 0 0 80',
                                            fieldLabel: '',
                                            boxLabel: '선택출력'
                                        },
                                        {
                                            xtype: 'checkboxfield',
                                            reference: 'chk_direct_print',
                                            margin: '0 0 0 20',
                                            fieldLabel: '',
                                            boxLabel: '다이렉트출력'
                                        },
                                        {
                                            xtype: 'button',
                                            reference: 'delete_button',
                                            margin: '0 0 0 100',
                                            width: 100,
                                            text: '자료삭제',
                                            listeners: {
                                                click: {
                                                    fn: 'onButtonClick_delete_button',
                                                    scope: 'controller'
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'gridpanel',
                            flex: 8,
                            reference: 'list_grid',
                            frame: true,
                            title: '',
                            store: 'TMS_DUNGE_MST',
                            columns: [
                                {
                                    xtype: 'rownumberer',
                                    width: 60,
                                    text: 'NO'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    width: 160,
                                    dataIndex: 'ordNo',
                                    text: '전표번호'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    width: 200,
                                    dataIndex: 'chulNm',
                                    text: '출판사명',
                                    listeners: {
                                        afterrender: {
                                            fn: 'onGridcolumnAfterRender_grid_col_chulpanNm',
                                            scope: 'controller'
                                        }
                                    },
                                    editor: {
                                        xtype: 'textfield'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'sujumCd',
                                    text: '서점코드',
                                    editor: {
                                        xtype: 'textfield',
                                        listeners: {
                                            specialkey: {
                                                fn: 'onTextfieldSpecialkey_sujum_cd',
                                                scope: 'controller'
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    width: 150,
                                    dataIndex: 'jiyukNm',
                                    text: '지역명'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    width: 200,
                                    dataIndex: 'sujumNm',
                                    text: '거래처명'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'qty',
                                    text: '부수',
                                    editor: {
                                        xtype: 'numberfield',
                                        allowDecimals: false,
                                        minValue: 0,
                                        listeners: {
                                            specialkey: {
                                                fn: 'onTextfieldSpecialkey_qty',
                                                scope: 'controller'
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'dunge',
                                    text: '덩이',
                                    editor: {
                                        xtype: 'numberfield',
                                        allowDecimals: false,
                                        minValue: 0,
                                        listeners: {
                                            specialkey: {
                                                fn: 'onTextfieldSpecialkey_dunge',
                                                scope: 'controller'
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    width: 200,
                                    dataIndex: 'bigo',
                                    text: '비고',
                                    editor: {
                                        xtype: 'textfield',
                                        listeners: {
                                            specialkey: {
                                                fn: 'onTextfieldSpecialkey_bigo',
                                                scope: 'controller'
                                            }
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                        return TmsLabel.util.Common.createCodeRenderer('173',value);
                                    },
                                    width: 60,
                                    dataIndex: 'chulgoGb',
                                    text: '구분'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                        if (value === '1') {
                                            return '전송';
                                        } else if (value === '0') {
                                            return '미전송';
                                        } else {
                                            return value;
                                        }
                                    },
                                    width: 60,
                                    dataIndex: 'transGb',
                                    text: '전송'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                        if (value === '1') {
                                            return '출력';
                                        } else if (value === '0') {
                                            return '미출력';
                                        } else {
                                            return value;
                                        }
                                    },
                                    width: 80,
                                    dataIndex: 'outYn',
                                    text: '출력유무'
                                }
                            ],
                            listeners: {
                                afterrender: {
                                    fn: 'onGridpanelAfterRender_list_grid',
                                    scope: 'controller'
                                }
                            },
                            plugins: [
                                {
                                    ptype: 'cellediting',
                                    clicksToEdit: 1,
                                    listeners: {
                                        beforeedit: 'onCellEditingBeforeEdit'
                                    }
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            flex: 1,
                            reference: 'con_footer',
                            defaults: {
                                margin: '0 10 0 0',
                                width: 100
                            },
                            layout: {
                                type: 'hbox',
                                align: 'middle',
                                pack: 'end'
                            },
                            items: [
                                {
                                    xtype: 'button',
                                    reference: 'trans_button',
                                    text: '자료전송',
                                    listeners: {
                                        click: {
                                            fn: 'onButtonClick_trans_button',
                                            scope: 'controller'
                                        }
                                    }
                                },
                                {
                                    xtype: 'button',
                                    reference: 'print_chulgo',
                                    text: '출고증 출력',
                                    listeners: {
                                        click: {
                                            fn: 'onButtonClick_print_chulgo',
                                            scope: 'controller'
                                        }
                                    }
                                },
                                {
                                    xtype: 'button',
                                    reference: 'print_label',
                                    text: '라벨 출력',
                                    listeners: {
                                        click: {
                                            fn: 'onButtonClick_print_label',
                                            scope: 'controller'
                                        }
                                    }
                                }
                            ]
                        }
                    ],
                    listeners: {
                        afterrender: {
                            fn: 'onPanelAfterRender_chulgo',
                            scope: 'controller'
                        }
                    }
                },
                {
                    xtype: 'panel',
                    title: '엑셀업로드',
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'form',
                            bodyPadding: 10,
                            title: '엑셀업로드'
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    title: '사용자관리',
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'form',
                            bodyPadding: 10,
                            title: '사용자관리'
                        }
                    ]
                }
            ],
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    items: [
                        {
                            xtype: 'label',
                            reference: 'welcome',
                            text: '누구님 환영합니다.',
                            listeners: {
                                afterrender: {
                                    fn: 'onLabelAfterRender_welcome',
                                    scope: 'controller'
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ],
    listeners: {
        beforerender: {
            fn: 'onViewportBeforeRender_main_panel',
            scope: 'controller'
        }
    },

    onCellEditingBeforeEdit: function(editor, context, eOpts) {
        // 전송구분이 전송인 로우는 편집안되게 막음
        if (context.record.get('transGb') === '1') return false;
    }

});