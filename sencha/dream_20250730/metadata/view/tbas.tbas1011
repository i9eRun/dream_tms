{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|snapToGrid": 10,
        "designer|userAlias": "tbas.tbas1011",
        "designer|userClassName": "tbas.tbas1011",
        "height": 850,
        "layout": "absolute",
        "title": "",
        "width": 1600
    },
    "configAlternates": {
        "designer|snapToGrid": "number",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "height": "auto",
        "layout": "string",
        "title": "string",
        "width": "auto"
    },
    "name": "MyPanel",
    "designerId": "d98ef78c-0b5e-4df6-a5f1-28dc03676931",
    "viewControllerInstanceId": "1c07916d-6849-496e-98d9-626d6ad8e7ce",
    "viewModelInstanceId": "75b798ca-c2ad-408b-85c3-2b27ed00d289",
    "cn": [
        {
            "type": "Ext.form.Label",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 10,
                "layout|y": 10,
                "text": "ÏàòÎ∞∞ÏÜ°Í¥ÄÎ¶¨ [TBAS1011]"
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string"
            },
            "name": "MyLabel2",
            "designerId": "edf97789-ed76-43b5-abf3-c0c01ad61e70"
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "height": 610,
                "layout|x": 10,
                "layout|y": 180,
                "reference": "list_grid",
                "store": "tbas.tbas1011.TmsSubVO",
                "title": "ÏàòÎ∞∞ÏÜ° Î¶¨Ïä§Ìä∏",
                "width": 800
            },
            "configAlternates": {
                "height": "auto",
                "layout|x": "number",
                "layout|y": "number",
                "title": "string",
                "reference": "string",
                "store": "store",
                "width": "auto"
            },
            "name": "MyGridPanel3",
            "designerId": "f46f65d8-1f84-4391-96dc-4e5ce1ec67a3",
            "cn": [
                {
                    "type": "Ext.grid.column.RowNumberer",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "text": "Î≤àÌò∏",
                        "width": 50
                    },
                    "configAlternates": {
                        "text": "string",
                        "width": "auto",
                        "align": "string"
                    },
                    "name": "MyRowNumberer",
                    "designerId": "a0dd2138-56b9-4894-a8e8-eee145f987bf"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "dataIndex": "custGb",
                        "text": "Í±∞ÎûòÏ≤òÍµ¨Î∂Ñ",
                        "width": 80
                    },
                    "configAlternates": {
                        "text": "string",
                        "align": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn8",
                    "designerId": "4690cf13-71f3-47eb-8060-d4b8ce079f55",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return dream.util.Common.createCodeRenderer('168',value);"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "renderer",
                            "designerId": "08ab08ee-2b8c-4d9b-8b0a-2d927f294551"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "custCd",
                        "text": "Í±∞ÎûòÏ≤òÏΩîÎìú",
                        "width": 70
                    },
                    "configAlternates": {
                        "text": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn1",
                    "designerId": "fdea38e3-4a5c-4164-bbb8-357936f8cbfe"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "custNm",
                        "text": "Í±∞ÎûòÏ≤òÎ™Ö",
                        "width": 200
                    },
                    "configAlternates": {
                        "text": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn4",
                    "designerId": "a585c35e-ddc1-46b3-ba0c-094f6707927c"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "jiyukNm",
                        "text": "ÏßÄÏó≠"
                    },
                    "configAlternates": {
                        "text": "string",
                        "dataIndex": "datafield"
                    },
                    "name": "MyColumn3",
                    "designerId": "7a062924-f51b-4adb-baf9-30912fdc4e7b"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "dataIndex": "cusCd",
                        "text": "ÏΩîÏä§ÏΩîÎìú",
                        "width": 60
                    },
                    "configAlternates": {
                        "text": "string",
                        "align": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn5",
                    "designerId": "1413dccb-de49-4137-974d-658992675820"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "dataIndex": "subSunbun",
                        "text": "ÏàúÎ≤à",
                        "width": 60
                    },
                    "configAlternates": {
                        "text": "string",
                        "align": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn6",
                    "designerId": "2555b3dc-64f3-4992-89dd-311252c0a8f3",
                    "cn": [
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "editor",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTextField2",
                            "designerId": "3032bad1-cef0-42b8-aebb-37c42d432c5b",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onTextfieldAfterRender",
                                        "implHandler": [
                                            "const grid = this.lookupReference('list_grid');",
                                            "const store = grid.getStore();",
                                            "const view = this.getView(); // View Ï†ëÍ∑º",
                                            "",
                                            "component.on('specialkey', function(component, e) {",
                                            "    if (e.getKey() === e.ENTER) {",
                                            "        const editedValue = parseInt(component.getValue());",
                                            "",
                                            "        if (isNaN(editedValue)) {",
                                            "            Ext.Msg.alert('Ïò§Î•ò', 'Ïà´ÏûêÎßå ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§.');",
                                            "            return;",
                                            "        }",
                                            "",
                                            "        const selectionModel = grid.getSelectionModel();",
                                            "        const record = selectionModel.getSelection()[0];",
                                            "",
                                            "        if (!record) {",
                                            "            Ext.Msg.alert('Ïò§Î•ò', 'Ìé∏Ïßë ÎåÄÏÉÅ Î†àÏΩîÎìúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');",
                                            "            return;",
                                            "        }",
                                            "",
                                            "        const cusCd = record.get('cusCd');",
                                            "        const oldValue = view.originalSunbun;",
                                            "",
                                            "        // Î≥ÄÍ≤Ω ÏóÜÏúºÎ©¥ Î¨¥Ïãú",
                                            "        if (oldValue === editedValue) return;",
                                            "",
                                            "        // oldSubSunbun Î∞±ÏóÖ",
                                            "        record.set('oldSubSunbun', oldValue);",
                                            "",
                                            "        // 3. ÏàúÎ≤à Ï∂©Îèå Î∞©ÏßÄ Ï≤òÎ¶¨",
                                            "        store.each(function(rec) {",
                                            "            if (rec === record || rec.get('cusCd') !== cusCd) return;",
                                            "",
                                            "            const sunbun = parseInt(rec.get('subSunbun'));",
                                            "",
                                            "            if (editedValue < oldValue) {",
                                            "                // ÏïûÏúºÎ°ú ÎãπÍπÄ: Ï§ëÍ∞Ñ ÏàúÎ≤àÎì§ +1",
                                            "                if (sunbun >= editedValue && sunbun < oldValue) {",
                                            "                    rec.set('subSunbun', sunbun + 1);",
                                            "                    rec.set('oldSubSunbun', sunbun);",
                                            "                }",
                                            "            } else {",
                                            "                // Îí§Î°ú Î∞ÄÎ¶º: Ï§ëÍ∞Ñ ÏàúÎ≤àÎì§ -1",
                                            "                if (sunbun <= editedValue && sunbun > oldValue) {",
                                            "                    rec.set('subSunbun', sunbun - 1);",
                                            "                    rec.set('oldSubSunbun', sunbun);",
                                            "                }",
                                            "            }",
                                            "        });",
                                            "",
                                            "        // 4. ÏûêÍ∏∞ ÏûêÏã† ÏàúÎ≤à ÏÑ§Ï†ï",
                                            "        record.set('subSunbun', editedValue);",
                                            "",
                                            "        // 5. Ï†ïÎ†¨ Î∞è ÏÑ†ÌÉù Ïú†ÏßÄ",
                                            "        store.sort([{ property: 'subSunbun', direction: 'ASC' }]);",
                                            "",
                                            "        Ext.defer(function() {",
                                            "            const idx = store.indexOf(record);",
                                            "            if (idx !== -1) {",
                                            "                grid.getSelectionModel().select(idx);",
                                            "            }",
                                            "        }, 100);",
                                            "    }",
                                            "}, this);",
                                            "",
                                            "",
                                            "",
                                            "",
                                            "",
                                            "",
                                            "",
                                            ""
                                        ],
                                        "name": "afterrender",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onTextfieldAfterRender",
                                    "designerId": "9e337021-5364-4233-940c-89c5f6a6445a"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "dataIndex": "subWorkGb",
                        "text": "ÏàòÍ±∞Î∞∞ÏÜ°",
                        "width": 60
                    },
                    "configAlternates": {
                        "text": "string",
                        "align": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn7",
                    "designerId": "1aa01615-22f5-4351-91e7-045a1ec2b72f",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return dream.util.Common.createCodeRenderer('1003',value);"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "renderer",
                            "designerId": "637b774f-819a-4243-be9a-e8b4d63b4a37"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "center",
                        "dataIndex": "subOrderGb",
                        "text": "Ï†ïÎ∞òÍµ¨Î∂Ñ",
                        "width": 60
                    },
                    "configAlternates": {
                        "text": "string",
                        "align": "string",
                        "dataIndex": "datafield",
                        "width": "auto"
                    },
                    "name": "MyColumn9",
                    "designerId": "436f0334-8d54-4843-a7b3-cfe66ab67491",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return dream.util.Common.createCodeRenderer('1022',value);"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "renderer",
                            "designerId": "06ad68c1-68b5-420b-a294-c8d60d2b9fe1"
                        }
                    ]
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onGridpanelAfterRender_list_grid",
                        "implHandler": [
                            "const store = component.getStore();",
                            "",
                            "// 1. proxyÏùò URLÏùÑ ÎèôÏ†ÅÏúºÎ°ú ÏÑ§Ï†ï",
                            "store.getProxy().setUrl(dream.util.Common.BASE_URL+'/tbas/1011/list');",
                            "",
                            "// 2. ÌïÑÏöî Ïãú Ï∂îÍ∞Ä ÌååÎùºÎØ∏ÌÑ∞ ÏÑ§Ï†ï (Ïòà: userCetCd Îì±)",
                            "store.getProxy().setExtraParams({",
                            "    userCetCd: dream.util.Common.LOGIN_USER_CET_CD",
                            "});",
                            ""
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onGridpanelAfterRender_list_grid",
                    "designerId": "fcc60840-ce06-45bf-88e8-2696248177d7"
                },
                {
                    "type": "Ext.grid.plugin.CellEditing",
                    "reference": {
                        "name": "plugins",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "clicksToEdit": 1
                    },
                    "configAlternates": {
                        "clicksToEdit": "number"
                    },
                    "name": "MyCellEditingPlugin",
                    "designerId": "774a4122-2f98-45f2-b73b-deea0418e2c3"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onGridpanelCellClick",
                        "implHandler": [
                            "const column = tableview.getHeaderAtIndex(cellIndex);",
                            "const columnDataIndex = column.dataIndex;",
                            "",
                            "if (columnDataIndex === 'subSunbun') {",
                            "    const originalValue = parseInt(record.get('subSunbun'));",
                            "    this.getView().originalSunbun = originalValue;",
                            "    console.log('originalSunbun Ï†ÄÏû•Îê®:', originalValue);",
                            "}"
                        ],
                        "name": "cellclick",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onGridpanelCellClick",
                    "designerId": "222c68de-0df4-48cd-8715-61bd6826d8ea"
                }
            ]
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "ÏΩîÏä§ÏÑ†ÌÉù",
                "labelWidth": 60,
                "layout|x": 10,
                "layout|y": 80,
                "reference": "search_cusCd",
                "width": 140
            },
            "configAlternates": {
                "fieldLabel": "string",
                "layout|x": "number",
                "layout|y": "number",
                "labelWidth": "number",
                "reference": "string",
                "width": "auto"
            },
            "name": "MyTextField3",
            "designerId": "c38b8ad7-6531-4821-96ff-426765059d0e",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTextfieldAfterRender_search_cusCd",
                        "implHandler": [
                            "const button = this.lookupReference('search_button');",
                            "component.on('specialkey', function(component, e) {",
                            "    if (e.getKey() === e.ENTER) {",
                            "        if (button) {",
                            "            button.fireEvent('click', button);",
                            "        }",
                            "    }",
                            "});"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onTextfieldAfterRender_search_cusCd",
                    "designerId": "126a21ee-e115-413b-86cc-6255c7e79f41"
                }
            ]
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Í±∞ÎûòÏ≤òÎ™Ö",
                "labelWidth": 60,
                "layout|x": 610,
                "layout|y": 140,
                "reference": "search_cusNm",
                "width": 140
            },
            "configAlternates": {
                "fieldLabel": "string",
                "layout|x": "number",
                "layout|y": "number",
                "labelWidth": "number",
                "reference": "string",
                "width": "auto"
            },
            "name": "MyTextField4",
            "designerId": "2cf6de0d-3c2e-4694-a803-69d2a62802bf",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTextfieldAfterRender_search_cusCd1",
                        "implHandler": [
                            "const button = this.lookupReference('sunbun_search_button');",
                            "component.on('specialkey', function(component, e) {",
                            "    if (e.getKey() === e.ENTER) {",
                            "        if (button) {",
                            "            button.fireEvent('click', button);",
                            "        }",
                            "    }",
                            "});"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onTextfieldAfterRender_search_cusCd1",
                    "designerId": "02aa1b3f-02f6-4d22-8e63-3113ecebe333"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 150,
                "layout|y": 80,
                "reference": "search_button",
                "text": "Ï∞æÍ∏∞",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "reference": "string",
                "text": "string",
                "width": "auto"
            },
            "name": "MyButton",
            "designerId": "a944c8f1-b138-4f99-aa7e-eaa42bb12b73",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_search_button",
                        "implHandler": [
                            "const popup = Ext.create('dream.view.tpop.tpop1005');",
                            "const me = this;",
                            "",
                            "popup.on('selectUser', function(win, record) {",
                            "    const sch_cusCd = me.lookupReference('search_cusCd');",
                            "",
                            "    sch_cusCd.setValue(record.get('cusCd'));",
                            "",
                            "});",
                            "",
                            "popup.show();"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_search_button",
                    "designerId": "6ac83810-8ad0-4f41-b4b3-a36e5daf737f"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 10,
                "layout|y": 140,
                "reference": "reset_button",
                "text": "Ï¥àÍ∏∞Ìôî",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton6",
            "designerId": "a75234dc-1441-4884-8b4e-546cab60f90d",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_reset_button",
                        "implHandler": [
                            "const grid = this.lookupReference('list_grid');",
                            "const store = grid.getStore();",
                            "",
                            "store.rejectChanges();",
                            "store.removeAll();"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_reset_button",
                    "designerId": "429a3e83-a39a-4bda-86a6-af0a15d398ca"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 80,
                "layout|y": 140,
                "reference": "load_button",
                "text": "Î∂àÎü¨Ïò§Í∏∞",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton17",
            "designerId": "4015bc13-4175-4ca0-993b-6967400674a7",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_load_button",
                        "implHandler": [
                            "const search_cusCd = this.lookupReference('search_cusCd').getValue();",
                            "const store = this.lookupReference('list_grid').getStore();",
                            "",
                            "if (!search_cusCd) {",
                            "    Ext.Msg.alert('ÏïåÎ¶º', 'ÏΩîÏä§Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!');",
                            "    return;",
                            "}",
                            "",
                            "store.getProxy().setExtraParams({",
                            "    userCetCd: dream.util.Common.LOGIN_USER_CET_CD,",
                            "    cusCd: search_cusCd",
                            "});",
                            "",
                            "store.load({",
                            "    callback: function (records) {",
                            "        records.forEach(record => {",
                            "            record.set('oldSubSunbun', record.get('subSunbun'));",
                            "        });",
                            "    }",
                            "});"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_load_button",
                    "designerId": "208a3215-3dd7-4334-ad89-1a0f40760ce1"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 150,
                "layout|y": 140,
                "reference": "add_button",
                "text": "ÏûêÎ£åÏ∂îÍ∞Ä",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton18",
            "designerId": "6977d9c9-7c5d-4c2a-a89e-340a1e649372",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_add_button",
                        "implHandler": [
                            "",
                            "const grid = this.lookupReference('list_grid');",
                            "const store = grid.getStore();",
                            "const selection = grid.getSelection()[0];",
                            "",
                            "if (!selection) {",
                            "    Ext.Msg.alert('Ïò§Î•ò', 'ÌñâÏùÑ Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');",
                            "    return;",
                            "}",
                            "",
                            "const baseIndex = Number(selection.get('subSunbun')); // Í∏∞Ï§Ä ÏàúÎ≤à",
                            "const cusCd = selection.get('cusCd'); // ÎèôÏùº Í∑∏Î£π",
                            "",
                            "const popup = Ext.create('dream.view.tpop.tpop1003');",
                            "const me = this;",
                            "",
                            "// ‚úÖ ÌåùÏóÖÏóêÏÑú Í±∞ÎûòÏ≤ò ÏÑ†ÌÉù Ïãú Ïù¥ÌõÑ Î°úÏßÅ Ïã§Ìñâ",
                            "popup.on('selectUser', function(win, record) {",
                            "    console.log(record);",
                            "    const selectedCustCd = record.get('CUST_CD');",
                            "    const selectedCustGb = record.get('CUST_GB');",
                            "    const selectedCustNm = record.get('CUST_NM');",
                            "    const selectedjiyukNm = record.get('JIYUK_NM');",
                            "",
                            "    if (!selectedCustCd) {",
                            "        Ext.Msg.alert('Ïò§Î•ò', 'Í±∞ÎûòÏ≤ò ÏΩîÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§.');",
                            "        return;",
                            "    }",
                            "",
                            "    // üëâ ÏàúÎ≤à Î∞ÄÍ∏∞",
                            "    store.each(r => {",
                            "        if (r.get('cusCd') === cusCd && Number(r.get('subSunbun')) >= baseIndex) {",
                            "            // Í∏∞Ï°¥ ÏàúÎ≤àÏùÑ Î∞±ÏóÖ (Ìïú Î≤àÎßå Ï†ÄÏû•)",
                            "//             if (!r.get('oldSubSunbun')) {",
                            "//                 r.set('oldSubSunbun', r.get('subSunbun'));",
                            "//             }",
                            "            r.set('subSunbun', Number(r.get('subSunbun')) + 1);",
                            "        }",
                            "    });",
                            "",
                            "    // üëâ ÏÉà Î†àÏΩîÎìú ÏÉùÏÑ±",
                            "    const newRecord = store.model.create({",
                            "        userCetCd: dream.util.Common.LOGIN_USER_CET_CD,",
                            "        cusCd: cusCd,",
                            "        subSunbun: baseIndex,",
                            "        custCd: selectedCustCd,",
                            "        custGb: selectedCustGb,",
                            "        custNm: selectedCustNm,",
                            "        jiyukNm: selectedjiyukNm,",
                            "        subWorkGb: '1',",
                            "        subOrderGb: '01',",
                            "        subChulGb: '',",
                            "        insertId: dream.util.Common.LOGIN_USER,",
                            "        updateId: dream.util.Common.LOGIN_USER",
                            "    });",
                            "",
                            "    // üëâ Ï∂îÍ∞Ä Î∞è Ï†ïÎ†¨",
                            "    store.add(newRecord);",
                            "    store.sort('subSunbun', 'ASC');",
                            "",
                            "    // üëâ ÏÑ†ÌÉù Ïú†ÏßÄ",
                            "    Ext.defer(() => {",
                            "        const matched = store.findRecord('subSunbun', baseIndex, 0, false, true);",
                            "        if (matched) {",
                            "            grid.getSelectionModel().select(matched);",
                            "        }",
                            "    }, 50);",
                            "});",
                            "",
                            "popup.show();",
                            ""
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_add_button",
                    "designerId": "d3393f46-98fe-4cb2-a699-249c991176e5"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 220,
                "layout|y": 140,
                "reference": "delete_button",
                "text": "ÏûêÎ£åÏÇ≠Ï†ú",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton19",
            "designerId": "e61c5afb-f8f2-46cd-849a-3d49926caa46",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_delete_button",
                        "implHandler": [
                            "const grid = this.lookupReference('list_grid');",
                            "const store = grid.getStore();",
                            "const selection = grid.getSelectionModel().getSelection()[0];",
                            "",
                            "if (!selection) {",
                            "    Ext.Msg.alert('Ïò§Î•ò', 'ÏÇ≠Ï†úÌï† ÌñâÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.');",
                            "    return;",
                            "}",
                            "",
                            "// Í∏∞Ï§Ä Í∞í Ï∂îÏ∂ú",
                            "const deletedSunbun = Number(selection.get('subSunbun'));",
                            "const deletedCusCd = selection.get('cusCd');",
                            "",
                            "// 1. ÏÇ≠Ï†ú ÎåÄÏÉÅ Î°úÏö∞ Ï†úÍ±∞",
                            "store.remove(selection);",
                            "",
                            "// 2. ÏÇ≠Ï†úÎêú ÏàúÎ≤à Ïù¥ÌõÑ Ìï≠Î™©Îì§Ïùò ÏàúÎ≤àÏùÑ -1Î°ú Ï°∞Ï†ï",
                            "store.each(record => {",
                            "    const currentSunbun = Number(record.get('subSunbun'));",
                            "    if (record.get('cusCd') === deletedCusCd && currentSunbun > deletedSunbun) {",
                            "        record.set('subSunbun', currentSunbun - 1);",
                            "    }",
                            "});",
                            "",
                            "// 3. Ï†ïÎ†¨",
                            "store.sort('subSunbun', 'ASC');",
                            "",
                            "// 4. Îã§Ïùå Ìï≠Î™© ÏûêÎèô ÏÑ†ÌÉù",
                            "Ext.defer(() => {",
                            "    const nextRecord = store.findRecord('subSunbun', deletedSunbun, 0, false, true);",
                            "    if (nextRecord) {",
                            "        grid.getSelectionModel().select(nextRecord);",
                            "    } else if (store.getCount() > 0) {",
                            "        // Îã§Ïùå Ìï≠Î™©Ïù¥ ÏóÜÎã§Î©¥ ÎßàÏßÄÎßâ Ìï≠Î™© ÏÑ†ÌÉù",
                            "        grid.getSelectionModel().select(store.getCount() - 1);",
                            "    }",
                            "}, 50);"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_delete_button",
                    "designerId": "eae3acb3-6644-4d5d-a408-91d069586f92"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 290,
                "layout|y": 140,
                "reference": "save_button",
                "text": "ÏûêÎ£åÏ†ÄÏû•",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton21",
            "designerId": "85fb14d3-ed48-4d44-ae86-a8504942e479",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_save_button",
                        "implHandler": [
                            "const grid = this.lookupReference('list_grid');",
                            "const store = grid.getStore();",
                            "",
                            "// Ïã†Í∑ú Îç∞Ïù¥ÌÑ∞",
                            "const newRecords = store.getNewRecords().map(r => {",
                            "    const data = r.getData();",
                            "    return data;",
                            "});",
                            "",
                            "// ÏàòÏ†ïÎêú Îç∞Ïù¥ÌÑ∞: oldSubSunbun Í≥†Î†§",
                            "const updatedRecords = store.getUpdatedRecords().map(r => {",
                            "    const data = r.getData();",
                            "    // oldSubSunbunÏù¥ ÏóÜÏúºÎ©¥ ÏõêÎûò subSunbunÏùÑ Î≥µÏÇ¨Ìï¥Ï§å",
                            "//     if (!data.oldSubSunbun) {",
                            "//         data.oldSubSunbun = data.subSunbun;",
                            "//     }",
                            "    return data;",
                            "});",
                            "",
                            "// ÏÇ≠Ï†úÎêú Îç∞Ïù¥ÌÑ∞",
                            "const removedRecords = store.getRemovedRecords().map(r => r.getData());",
                            "",
                            "const payload = {",
                            "    insertList: newRecords,",
                            "    updateList: updatedRecords,",
                            "    deleteList: removedRecords",
                            "};",
                            "",
                            "Ext.Msg.confirm('ÌôïÏù∏', 'Ï†ÄÏû•ÌïòÏãúÍ≤†ÏäµÎãàÍπå?', function(btn) {",
                            "    if (btn !== 'yes') return;",
                            "",
                            "    Ext.Ajax.request({",
                            "        url: dream.util.Common.BASE_URL + '/tbas/1011/save',",
                            "        method: 'POST',",
                            "        jsonData: payload,",
                            "        success: function(response) {",
                            "            const res = Ext.decode(response.responseText);",
                            "            if (res.success) {",
                            "                Ext.Msg.alert('ÏïåÎ¶º', 'Ï†ÄÏû• ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');",
                            "                store.reload();",
                            "            } else {",
                            "                Ext.Msg.alert('Ïã§Ìå®', res.message || 'Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');",
                            "            }",
                            "        },",
                            "        failure: function(response) {",
                            "            Ext.Msg.alert('Ïò§Î•ò', 'ÏÑúÎ≤Ñ ÌÜµÏã† Ïò§Î•ò ÎòêÎäî Ï†ÄÏû• Ïã§Ìå®');",
                            "        }",
                            "    });",
                            "});"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_save_button",
                    "designerId": "fdc848fd-1824-484b-8050-a5bdea2fe50c"
                }
            ]
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 750,
                "layout|y": 80,
                "text": "ÏóëÏÖÄ",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto"
            },
            "name": "MyButton22",
            "designerId": "9e3336f0-01ae-4ffe-addb-8aa12cad19b4"
        },
        {
            "type": "Ext.button.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|x": 750,
                "layout|y": 140,
                "reference": "sunbun_search_button",
                "text": "ÏàúÎ≤àÏ∞æÍ∏∞",
                "width": 60
            },
            "configAlternates": {
                "layout|x": "number",
                "layout|y": "number",
                "text": "string",
                "width": "auto",
                "reference": "string"
            },
            "name": "MyButton30",
            "designerId": "502e4a95-897c-4b90-bd64-e71362871798",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onButtonClick_sunbun_search_button",
                        "implHandler": [
                            "let searchMatches = [];",
                            "let searchIndex = 0;",
                            "",
                            "",
                            "const grid = this.lookupReference('list_grid');",
                            "const store = grid.getStore();",
                            "const keyword = this.lookupReference('search_cusNm').getValue();",
                            "",
                            "if (!keyword) {",
                            "    Ext.Msg.alert('ÏïåÎ¶º', 'Í≤ÄÏÉâÌï† ÌÇ§ÏõåÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.');",
                            "    return;",
                            "}",
                            "",
                            "// Ï≤´ Í≤ÄÏÉâÏù¥Í±∞ÎÇò ÌÇ§ÏõåÎìúÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏùÑ Îïå ÏùºÏπò Ìï≠Î™©ÏùÑ Îã§Ïãú Ï∞æÏùå",
                            "if (!this.lastKeyword || this.lastKeyword !== keyword) {",
                            "    this.searchMatches = [];",
                            "",
                            "    store.each((record, index) => {",
                            "        const name = record.get('custNm') || '';",
                            "        if (name.includes(keyword)) {",
                            "            this.searchMatches.push(index);",
                            "        }",
                            "    });",
                            "",
                            "    this.searchIndex = 0;",
                            "    this.lastKeyword = keyword;",
                            "}",
                            "",
                            "if (this.searchMatches.length === 0) {",
                            "    Ext.Msg.alert('Í≤∞Í≥º ÏóÜÏùå', `'${keyword}'Ïù¥(Í∞Ä) Ìè¨Ìï®Îêú Í±∞ÎûòÏ≤òÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);",
                            "    return;",
                            "}",
                            "",
                            "// ÌòÑÏû¨ Ïù∏Îç±Ïä§Ïóê Ìï¥ÎãπÌïòÎäî Î†àÏΩîÎìú ÏÑ†ÌÉù Î∞è Ìè¨Ïª§Ïä§",
                            "const matchedIndex = this.searchMatches[this.searchIndex];",
                            "const record = store.getAt(matchedIndex);",
                            "",
                            "const rowIndex = matchedIndex;",
                            "const columnIndex = grid.getColumnManager().getHeaderIndex('subSunbun');",
                            "",
                            "grid.getSelectionModel().select(record); // Ìñâ ÏÑ†ÌÉù",
                            "",
                            "grid.getView().focusCell({",
                            "    row: rowIndex,",
                            "    column: columnIndex",
                            "});",
                            "",
                            "// Îã§Ïùå Í≤ÄÏÉâ ÏúÑÏπòÎ°ú Ïù¥Îèô (ÏàúÌôò)",
                            "this.searchIndex = (this.searchIndex + 1) % this.searchMatches.length;"
                        ],
                        "name": "click",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onButtonClick_sunbun_search_button",
                    "designerId": "d7e8575a-0435-4280-a55d-e2dd68f55969"
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelBeforeRender",
                "implHandler": [
                    "dream.util.Common.loadCode('168');",
                    "dream.util.Common.loadCode('1003');",
                    "dream.util.Common.loadCode('1022');",
                    ""
                ],
                "name": "beforerender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPanelBeforeRender",
            "designerId": "2243d896-1b84-4054-ad9c-06ed54b8134c"
        }
    ]
}